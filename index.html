<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gieo Qu·∫ª ƒê·∫ßu NƒÉm 2026</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üßß</text></svg>">
    <style>
        /* --- 1. C·∫§U H√åNH CHUNG --- */
        body {
            margin: 0; padding: 0; display: flex; justify-content: center; align-items: center;
            height: 100vh;
            background: linear-gradient(135deg, #8a0000 0%, #ff1a1a 100%);
            font-family: 'Segoe UI', Roboto, Arial, sans-serif;
            overflow: hidden; text-align: center; color: white;
        }

        /* --- 2. NG·ª∞A PHI --- */
        .horse-container {
            position: absolute; bottom: 10px; left: -300px;
            z-index: 5; pointer-events: none;
            display: flex; gap: -20px;
            animation: runAcross 10s linear infinite;
        }
        .horse-unit {
            font-size: 60px; display: inline-block;
            transform: scaleX(-1);
            filter: drop-shadow(5px 5px 5px rgba(0,0,0,0.5));
        }
        .galloping { animation: gallop 0.6s ease-in-out infinite alternate; }
        .horse-red { filter: hue-rotate(-50deg) saturate(2) drop-shadow(5px 5px 5px rgba(0,0,0,0.5)); }
        .horse-gold { filter: hue-rotate(45deg) saturate(3) brightness(1.2) drop-shadow(5px 5px 5px rgba(0,0,0,0.5)); animation-delay: 0.1s; }
        .horse-brown { animation-delay: 0.2s; }
        @keyframes runAcross { 0% { left: -300px; } 100% { left: 110vw; } }
        @keyframes gallop { 0% { transform: scaleX(-1) translateY(0) rotate(0deg); } 100% { transform: scaleX(-1) translateY(-20px) rotate(5deg); } }

        /* --- 3. N√öT LOA --- */
        .sound-control {
            position: fixed; top: 20px; right: 20px;
            width: 40px; height: 40px;
            background: rgba(0, 0, 0, 0.5); border: 2px solid #ffd700; border-radius: 50%;
            display: flex; justify-content: center; align-items: center;
            font-size: 20px; cursor: pointer; z-index: 100;
            transition: transform 0.2s; animation: pulse-btn 2s infinite;
        }
        @keyframes pulse-btn { 0% { box-shadow: 0 0 0 0 rgba(255, 215, 0, 0.7); } 70% { box-shadow: 0 0 0 10px rgba(255, 215, 0, 0); } 100% { box-shadow: 0 0 0 0 rgba(255, 215, 0, 0); } }

        /* --- 4. BAO L√å X√å --- */
        #envelope {
            width: 280px; height: 400px;
            background: linear-gradient(to bottom, #b30000, #e60000);
            border: 4px solid #ffd700; border-radius: 20px;
            cursor: pointer; display: flex; flex-direction: column;
            justify-content: center; align-items: center;
            box-shadow: 0 10px 50px rgba(0,0,0,0.7);
            transition: transform 0.3s; z-index: 20; position: relative;
            margin-bottom: 80px; 
        }
        #envelope:hover { transform: scale(1.05); }
        .envelope-icon { font-size: 80px; margin-bottom: -10px; filter: drop-shadow(0 4px 4px rgba(0,0,0,0.3)); }
        .year-text { font-size: 50px; font-weight: 900; color: #ffd700; text-shadow: 3px 3px 0px #8b0000; font-family: 'Arial Black', sans-serif; margin-bottom: 10px; }
        .click-hint { font-size: 18px; font-weight: bold; margin-top: 10px; animation: blink 1.5s infinite; }
        @keyframes blink { 50% { opacity: 0.5; } }

        /* --- 5. N·ªòI DUNG CH√çNH --- */
        #content {
            display: none; background: #fffaf0;
            padding: 25px 20px; border-radius: 20px;
            box-shadow: 0 0 60px rgba(255, 204, 0, 0.9);
            width: 360px; max-width: 90%;
            border: 3px solid #d41414;
            position: relative; z-index: 20;
            margin-bottom: 100px;
            animation: popIn 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        @keyframes popIn { 0% { opacity: 0; transform: scale(0.5); } 100% { opacity: 1; transform: scale(1); } }

        h1.title-tet { color: #d00000; font-size: 24px; font-weight: bold; margin-bottom: 5px; }
        .horse-icons-top { font-size: 28px; margin: 0px 0 10px 0; }
        .wishes { 
            font-size: 15px; line-height: 1.6; color: #333; font-style: italic; font-weight: 600; 
            background: #fff; padding: 15px; border-radius: 10px; border: 1px dashed #d00000; margin-bottom: 20px;
        }

        .btn-lucky {
            display: inline-block; padding: 12px 30px;
            background: linear-gradient(to right, #ffd700, #fdb931);
            color: #d00000; font-weight: bold; border-radius: 50px;
            border: 2px solid #fff; cursor: pointer;
            box-shadow: 0 4px 15px rgba(255, 215, 0, 0.5);
            font-size: 16px; transition: transform 0.2s;
            animation: pulse-btn 2s infinite;
        }
        .btn-lucky:hover { transform: scale(1.05); }

        /* --- 6. M√ÄN H√åNH QR CODE (N·ªÄN BLUR + GI·ªÆ NGUY√äN BACKGROUND) --- */
        #qrOverlay {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            /* N·ªÅn m√†u ƒë·ªè m·ªù + hi·ªáu ·ª©ng Blur k√≠nh */
            background: rgba(100, 0, 0, 0.5); 
            backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px);
            z-index: 2000;
            justify-content: center; align-items: center; flex-direction: column;
            animation: fadeIn 0.5s;
        }
        
        .btn-close-qr {
            position: absolute; top: 30px; right: 30px;
            color: #fff; font-size: 40px; cursor: pointer;
            opacity: 0.8; transition: 0.3s;
            text-shadow: 0 0 10px rgba(0,0,0,0.5);
        }
        .btn-close-qr:hover { opacity: 1; transform: scale(1.1); }

        .qr-title-large { 
            color: #ffd700; font-size: 28px; font-weight: bold; 
            margin-bottom: 20px; text-transform: uppercase; letter-spacing: 1px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.6);
        }

        .qr-img-large {
            width: 260px; height: 260px;
            border: 5px solid #ffd700; border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            background: white; margin-bottom: 10px;
        }

        .qr-note {
            color: #fff; font-style: italic; font-size: 16px;
            margin-bottom: 25px; text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
        }

        .btn-download-bottom {
            display: flex; align-items: center; gap: 10px;
            padding: 10px 25px;
            background: #d00000; border: 2px solid #ffd700;
            color: #ffd700; border-radius: 50px;
            text-decoration: none; font-weight: bold; font-size: 16px;
            transition: 0.3s; box-shadow: 0 4px 10px rgba(0,0,0,0.3);
        }
        .btn-download-bottom:hover { transform: scale(1.05); background: #b30000; }

        /* --- 7. M√ÄN H√åNH CH·ªú (X√ìC TH·∫∫) - THI·∫æT K·∫æ L·∫†I --- */
        #shakingModal {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.7); z-index: 3000;
            justify-content: center; align-items: center; flex-direction: column;
        }
        
        /* ·ªêng xƒÉm to h∆°n, ƒë·∫πp h∆°n */
        .fortune-container {
            width: 100px; height: 160px;
            background: linear-gradient(to right, #b30000, #d00000, #b30000);
            border: 4px solid #ffd700;
            border-radius: 10px 10px 30px 30px;
            position: relative;
            animation: shake-hard 0.4s ease-in-out infinite; 
            box-shadow: 0 10px 30px rgba(0,0,0,0.6);
        }
        /* Mi·ªáng ·ªëng */
        .fortune-container::before {
            content: ''; position: absolute; top: -15px; left: 5px;
            width: 82px; height: 25px;
            background: #800000; border: 4px solid #ffd700;
            border-radius: 50%; z-index: 2;
        }
        /* Th·∫ª b√™n trong */
        .sticks-bundle {
            position: absolute; top: -40px; left: 20px;
            width: 60px; height: 60px; z-index: 1;
        }
        .stick-sample {
            position: absolute; width: 10px; height: 80px;
            background: #f0e68c; border-radius: 5px; border: 1px solid #d4a017;
        }
        .stick-sample:nth-child(1) { left: 10px; transform: rotate(-15deg); top: 10px; }
        .stick-sample:nth-child(2) { left: 25px; transform: rotate(0deg); top: 0px; }
        .stick-sample:nth-child(3) { left: 40px; transform: rotate(15deg); top: 10px; }

        @keyframes shake-hard {
            0% { transform: rotate(0deg) translateY(0); }
            25% { transform: rotate(-10deg) translateY(-10px); }
            50% { transform: rotate(0deg) translateY(0); }
            75% { transform: rotate(10deg) translateY(10px); }
            100% { transform: rotate(0deg) translateY(0); }
        }
        
        .shaking-text {
            color: #ffd700; font-size: 22px; font-weight: bold; margin-top: 40px;
            text-shadow: 0 0 10px #d00000; animation: blink 1s infinite;
        }

        /* --- 8. M√ÄN H√åNH K·∫æT QU·∫¢ (TH·∫∫ TRE - ƒê√É S·ª¨A L·ªñI UI) --- */
        #resultModal {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.7); z-index: 3000;
            justify-content: center; align-items: center;
            animation: fadeIn 0.3s;
        }

        /* TH·∫∫ TRE L·ªöN (ƒê·∫†I T·ª∞) - KH√îNG D√ôNG VI·∫æT D·ªåC N·ªÆA */
        .bamboo-card {
            width: 300px; /* R·ªông ra ƒë·ªÉ ch·ª©a ch·ªØ */
            min-height: 450px;
            background: #fdf5e6; /* M√†u gi·∫•y c≈©/g·ªó s√°ng */
            border: 8px solid #d4a017; /* Vi·ªÅn v√†ng */
            border-radius: 15px;
            position: relative;
            display: flex; flex-direction: column; align-items: center;
            padding: 0;
            box-shadow: 0 0 50px rgba(255, 215, 0, 0.5);
            transform: scale(0.1); opacity: 0;
            animation: card-reveal 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
            overflow: hidden;
        }

        /* Header th·∫ª */
        .card-header {
            width: 100%; height: 70px;
            background: #d00000;
            display: flex; justify-content: center; align-items: center;
            color: #ffd700; font-size: 35px; font-weight: 900;
            border-bottom: 4px solid #d4a017;
            text-transform: uppercase;
        }

        /* Th√¢n th·∫ª */
        .card-body {
            padding: 20px; width: 100%; box-sizing: border-box;
            text-align: center; color: #5c4033;
            background-image: linear-gradient(#fdf5e6 1px, transparent 1px), linear-gradient(90deg, #fdf5e6 1px, transparent 1px);
            background-size: 20px 20px;
        }

        .fortune-rank {
            display: inline-block;
            font-size: 20px; font-weight: bold; color: #d00000;
            border: 2px solid #d00000; padding: 5px 15px; border-radius: 20px;
            margin-bottom: 20px; text-transform: uppercase;
        }

        .fortune-content p {
            font-size: 16px; margin: 10px 0; font-weight: 600;
            border-bottom: 1px dashed #ccc; padding-bottom: 5px;
        }
        .fortune-content b { color: #d00000; font-size: 18px; }

        .poem {
            margin-top: 15px; font-style: italic; color: #800000; font-weight: bold;
        }

        /* N√∫t Nh·∫≠n L·ªôc */
        .btn-get-money-card {
            margin-top: auto; margin-bottom: 20px;
            background: linear-gradient(to right, #d00000, #ff0000); 
            color: #fff; border: none; padding: 12px 30px;
            border-radius: 50px; cursor: pointer; font-weight: bold;
            box-shadow: 0 4px 10px rgba(0,0,0,0.3); font-size: 16px;
            animation: pulse-btn 2s infinite;
        }

        @keyframes card-reveal {
            0% { transform: translateY(200px) scale(0.5); opacity: 0; }
            100% { transform: translateY(0) scale(1); opacity: 1; }
        }

        /* --- EFFECTS --- */
        .flower { position: absolute; top: -10vh; z-index: 10; pointer-events: none; opacity: 0.8; }
        .firework-shell { position: absolute; top: 0; left: 0; pointer-events: none; z-index: 5; }
        .firework-particle { position: absolute; border-radius: 50%; animation: realistic-burst 1.2s ease-out forwards, twinkle 0.2s infinite alternate; }
        @keyframes realistic-burst { 0% { transform: translate(0, 0) scale(1); opacity: 1; } 60% { transform: translate(var(--x), var(--y)) scale(0.8); opacity: 0.8; } 100% { transform: translate(var(--x), calc(var(--y) + 100px)) scale(0.4); opacity: 0; } }
        @keyframes twinkle { from { opacity: 1; } to { opacity: 0.7; } }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    </style>
</head>

<body onclick="playAudioForce()">

    <div id="shakingModal">
        <div class="fortune-container">
            <div class="sticks-bundle">
                <div class="stick-sample"></div>
                <div class="stick-sample"></div>
                <div class="stick-sample"></div>
            </div>
        </div>
        <div class="shaking-text">ƒêang xin keo... üôè</div>
    </div>

    <div id="resultModal">
        <div class="bamboo-card">
            <div class="card-header">
                <div>L·ªôc</div>
            </div>
            
            <div class="card-body">
                <div class="fortune-rank">Th∆∞·ª£ng Th∆∞·ª£ng C√°t</div>
                
                <div class="fortune-content">
                    <p><b>üå∏ S·ª± Nghi·ªáp:</b><br>Qu√Ω nh√¢n ph√π tr·ª£, thƒÉng ti·∫øn.</p>
                    <p><b>‚ù§Ô∏è T√¨nh Duy√™n:</b><br>Vi√™n m√£n, h·∫°nh ph√∫c tr·ªçn v·∫πn.</p>
                    <p><b>üí∞ T√†i L·ªôc:</b><br>Ti·ªÅn v√†o nh∆∞ n∆∞·ªõc, sung t√∫c.</p>
                </div>

                <div class="poem">
                    "B√≠nh Ng·ªç nƒÉm m·ªõi ph√°t t√†i<br>
                    B√¨nh an, may m·∫Øn, l·ªôc lai ƒë·∫ßy nh√†"
                </div>
            </div>

            <button class="btn-get-money-card" onclick="revealQR()">Nh·∫≠n L·ªôc Ngay üßß</button>
        </div>
    </div>

    <div id="qrOverlay">
        <div class="btn-close-qr" onclick="closeQR()">√ó</div>
        <div class="qr-title-large">L√¨ x√¨ may m·∫Øn</div>
        
        <img src="qr-viettel.jpg" alt="QR Code" class="qr-img-large">
        
        <div class="qr-note">(Qu√©t b·∫±ng APP Viettel Money nha)</div>
        
        <a href="qr-viettel.jpg" download="LiXi_Tet_2026.jpg" class="btn-download-bottom">
            <span>‚¨áÔ∏è</span> T·∫£i m√£ QR v·ªÅ
        </a>
    </div>

    <div id="soundBtn" class="sound-control" onclick="toggleSound(event)">üîá</div>

    <div class="horse-container">
        <div class="horse-unit horse-red galloping">üêé</div>
        <div class="horse-unit horse-gold galloping">üêé</div>
        <div class="horse-unit horse-brown galloping">üêé</div>
    </div>

    <div id="envelope" onclick="openGift()">
        <div class="envelope-icon">üßß</div>
        <div class="year-text">2026</div>
        <div class="click-hint">·∫§n v√†o ƒë√¢y ƒë·ªÉ nh·∫≠n <br> ƒëi·ªÅu b·∫•t ng·ªù nha ^^</div>
    </div>

    <div id="content">
        <h1 class="title-tet">Ch√∫c M·ª´ng NƒÉm M·ªõi 2026!</h1>
        <div class="horse-icons-top">üêé üêé üêé</div>
        
        <div class="wishes">
            "Ch√∫c em 1 nƒÉm m·ªõi 2026 s·ª©c kh·ªèe - b√¨nh an - may m·∫Øn - m·ªçi ƒëi·ªÅu ƒë·ªÅu ƒë∆∞·ª£c nh∆∞ √Ω - m·ªçi d·ª± ƒë·ªãnh k·∫ø ho·∫°ch ƒë·ªÅu ƒë∆∞·ª£c su√¥n s·∫ª, thu·∫≠n l·ª£i"
        </div>

        <div class="btn-lucky" onclick="startShaking()">
            ‚ú® R√∫t Qu·∫ª L·ªôc ƒê·∫ßu NƒÉm üßß
        </div>
    </div>

    <audio id="tetMusic" loop>
        <source src="nhac-tet.mp3" type="audio/mpeg">
    </audio>

    <script>
        var music = document.getElementById('tetMusic');
        var soundBtn = document.getElementById('soundBtn');
        var isPlaying = false;

        window.onload = function() {
            setInterval(createFlower, 350);
            setInterval(createFirework, 800);
            music.play().then(() => { 
                isPlaying = true; updateSoundIcon(true);
            }).catch(() => {
                updateSoundIcon(false);
            });
        };

        function updateSoundIcon(playing) {
            if (playing) { soundBtn.innerHTML = 'üîä'; soundBtn.style.animation = 'none'; } 
            else { soundBtn.innerHTML = 'üîá'; soundBtn.style.animation = 'pulse-btn 2s infinite'; }
        }

        function toggleSound(event) {
            event.stopPropagation();
            if (music.paused) { music.play(); isPlaying = true; updateSoundIcon(true); } 
            else { music.pause(); isPlaying = false; updateSoundIcon(false); }
        }

        function playAudioForce() {
            if (music.paused) {
                music.play().then(() => { isPlaying = true; updateSoundIcon(true); }).catch((e) => console.log(e));
            }
        }

        function openGift() {
            playAudioForce();
            document.getElementById('envelope').style.display = 'none';
            document.getElementById('content').style.display = 'block';
        }

        // --- LOGIC XIN KEO & R√öT QU·∫∫ ---
        function startShaking() {
            // Hi·ªán m√†n h√¨nh x√≥c th·∫ª
            document.getElementById('shakingModal').style.display = 'flex';
            
            // Sau 3 gi√¢y th√¨ hi·ªán k·∫øt qu·∫£
            setTimeout(function() {
                document.getElementById('shakingModal').style.display = 'none';
                document.getElementById('resultModal').style.display = 'flex';
            }, 3000);
        }

        function revealQR() {
            // ·∫®n modal k·∫øt qu·∫£
            document.getElementById('resultModal').style.display = 'none';
            // ·∫®n m√†n h√¨nh l·ªùi ch√∫c (Content)
            document.getElementById('content').style.display = 'none';
            // Hi·ªán m√†n h√¨nh QR Overlay
            document.getElementById('qrOverlay').style.display = 'flex';
        }

        function closeQR() {
            // ·∫®n m√†n h√¨nh QR
            document.getElementById('qrOverlay').style.display = 'none';
            // Hi·ªán l·∫°i m√†n h√¨nh l·ªùi ch√∫c ƒë·ªÉ r√∫t l·∫°i n·∫øu mu·ªën
            document.getElementById('content').style.display = 'block';
        }

        // --- HI·ªÜU ·ª®NG ---
        function createFlower() {
            const flower = document.createElement('div');
            flower.className = 'flower';
            flower.innerHTML = Math.random() > 0.5 ? 'üå∏' : 'üåº'; 
            flower.style.left = Math.random() * 100 + 'vw';
            flower.style.fontSize = (Math.random() * 20 + 10) + 'px';
            const duration = Math.random() * 5 + 5;
            flower.style.animation = `fall ${duration}s linear forwards`;
            document.body.appendChild(flower);
            const style = document.createElement('style');
            style.innerHTML = `@keyframes fall { to { transform: translateY(110vh) rotate(${Math.random() * 360}deg); } }`;
            document.head.appendChild(style);
            setTimeout(() => { flower.remove(); style.remove(); }, duration * 1000);
        }

        function createFirework() {
            const shell = document.createElement('div');
            shell.className = 'firework-shell';
            shell.style.left = Math.random() * 90 + 5 + 'vw';
            shell.style.top = Math.random() * 60 + 10 + 'vh';
            document.body.appendChild(shell);
            const colors = ['#ff0000', '#ffff00', '#00ff00', '#00ffff', '#ff00ff', '#ffaa00', '#ffffff'];
            const color = colors[Math.floor(Math.random() * colors.length)];
            for (let i = 0; i < 50; i++) {
                const particle = document.createElement('div');
                particle.className = 'firework-particle';
                particle.style.backgroundColor = color;
                const size = Math.random() * 3 + 2 + 'px';
                particle.style.width = size; particle.style.height = size;
                particle.style.boxShadow = `0 0 10px ${color}, 0 0 20px ${color}`;
                const angle = (i / 50) * 360 * (Math.PI / 180);
                const distance = Math.random() * 200 + 50;
                const x = Math.cos(angle) * distance + 'px';
                const y = Math.sin(angle) * distance + 'px';
                particle.style.setProperty('--x', x); particle.style.setProperty('--y', y);
                shell.appendChild(particle);
            }
            setTimeout(() => { shell.remove(); }, 1200);
        }
    </script>
</body>
</html>
